---
id: common-errors
title: Keploy 常见错误
sidebar_label: 常见错误
tags:
  - 问题解析
  - 常见问题
---

让我们来看看使用 Keploy 时可能遇到的一些常见错误！

### 1. 依赖项未找到错误

#### 描述：

当 Keploy 无法定位或访问所需的依赖项（如数据库或外部服务）时，会出现此错误。

#### 可能原因：

- 依赖项可能未运行或配置不正确。
- 网络问题可能阻止 Keploy 连接到外部依赖项。

#### 解决方案：

- 确认所有必需服务（如数据库、第三方 API）处于活动状态且可访问。
- 检查环境变量或配置文件，确保主机和端口信息正确。
- 使用网络诊断工具（如 ping、traceroute）排查连接问题。

### 2. 无法记录 API 调用

#### 描述：

Keploy 未能记录传入的 API 流量，导致无法生成测试用例。

#### 可能原因：

- 与应用程序集成不正确。
- Keploy 可能未随应用程序正确启动，或 SDK 配置不当。
- 应用程序可能未发出 Keploy 可识别的 API 调用。

#### 解决方案：

- 仔细检查所用编程语言的集成指南。
- 确保 Keploy 已正确接入 API 层。
- 查看 Keploy 日志，确认是否有请求被遗漏或跳过。

### 3. 测试回放失败

#### 描述：

Keploy 无法回放已记录的 API 请求。

#### 可能原因：

- 外部服务或数据库状态与记录时不同。
- 时间戳、UUID 或随机值等非确定性值导致失败。

#### 解决方案：

- 利用 Keploy 的模拟功能来仿真外部服务和数据库。
- 使用配置处理或排除非确定性值，确保比较一致性。
- 定期重置数据库状态，使其与记录时条件匹配。

### 4. 响应不匹配错误

#### 描述：

Keploy 回放 API 调用时，检测到记录的响应与当前响应不一致。

#### 可能原因：

- 应用程序行为变更导致响应不同。
- 响应格式、状态码或标头在记录后发生变化。

#### 解决方案：

- 审查应用程序变更，确认不匹配是否预期（如新功能引入）。
- 若变更合理，更新测试基线以反映新行为。
- 使用 Keploy 的灵活比较选项，忽略特定字段或值（如时间戳、版本号）。

### 5. 测试生成不正确

#### 描述：

Keploy 生成的测试未能准确反映 API 交互。

#### 可能原因：

- API 交互过于复杂或包含 Keploy 无法自动处理的定制逻辑。
- API 参数在记录过程中缺失或被误解。

#### 解决方案：

- 检查记录的测试用例是否正确。
- 手动调整生成的测试，补充缺失或被误解的参数。
- 必要时使用 Keploy API 优化记录过程。

### 6. 测试回放期间的数据库连接错误

#### 描述：

Keploy 在回放测试时无法连接到数据库或其他外部系统。

#### 可能原因：

- 测试环境可能无法访问原始记录时的数据库。
- 测试环境中的数据库凭据或主机信息错误或缺失。

#### 解决方案：

- 确保测试环境配置与记录设置一致。
- 使用数据库模拟或桩模块进行隔离测试。
- 仔细检查连接字符串、凭据及数据库可用性。

### 7. 配置缺失或无效错误

#### 描述：

Keploy 找不到有效配置文件或配置中存在错误。

#### 可能原因：

- Keploy 配置文件（如 keploy.yaml）缺失或包含无效值。
- Keploy 所需的环境变量未设置。

#### 解决方案：

- 确保配置文件存在且格式正确。
- 填写所有必填字段并确保值有效。
- 检查环境变量是否已正确设置。

### 8. 超时错误

#### 描述：

Keploy 在记录或回放 API 调用时超时。

#### 可能原因：

- 长时间运行的 API 请求或缓慢的外部依赖项导致超时。
- Keploy 的 API 调用超时设置可能过低。

#### 解决方案：

- 在 Keploy 配置中增加超时设置。
- 定位并优化性能低下的 API 或依赖项。
- 使用监控工具分析 API 性能。

### 9. 权限不足

#### 描述：

Keploy 因访问文件、网络或其他资源时权限不足而失败。

#### 可能原因：

运行 Keploy 的用户或服务可能缺乏访问数据库、API 或文件系统等资源的足够权限。

#### 解决方案：

- 确保运行 Keploy 的用户或服务具备必要权限。
- 检查系统权限设置，为 Keploy 提供正常运行所需的访问权限。

### 10. 版本兼容性问题

#### 描述：

因 Keploy、其依赖项或被测应用之间的版本不匹配导致错误。

#### 可能原因：

- 使用了与应用程序不兼容的 Keploy 或相关 SDK 版本。
- Keploy 的依赖项（如模拟或回放组件）可能已更新并破坏兼容性。

#### 解决方案：

- 验证 Keploy 及其 SDK 的版本兼容性。
- 查阅 Keploy 文档或发行说明，了解已知问题。
- 使用版本锁定维持稳定环境。

### 11. 不支持的协议或 API

#### 描述：

Keploy 不支持您使用的协议或 API 结构（如 gRPC、SOAP 等）。

#### 可能原因：

- 应用程序可能使用了 Keploy 尚未支持的 API 或协议（如 WebSocket、gRPC）。

#### 解决方案：

- 确认支持的协议（当前为 HTTP/REST 和 GraphQL）。
- 对于不支持的协议，考虑使用替代工具或框架。

如果尝试上述解决方案后问题仍未解决，欢迎联系 Keploy 团队或访问社区论坛获取更多支持。祝测试愉快！

import GetSupport from '../concepts/support.md'

<GetSupport/>